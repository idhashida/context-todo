# üìå –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è BDTM API

## **–û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –∏ –∏—Ö –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏**
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (`users`)** ‚Äì —Ö—Ä–∞–Ω—è—Ç —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –ø—Ä–æ—Ñ–∏–ª—å.
- **–ó–∞–¥–∞—á–∏ (`tasks`)** ‚Äì –æ—Å–Ω–æ–≤–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∞—è —Å–æ–±–æ–π –¥–µ–π—Å—Ç–≤–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å.
- **–°—Ü–µ–Ω–∞—Ä–∏–∏ (`scenarios`)** ‚Äì –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Given-When-Then.
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç—ã (`contexts`)** ‚Äì —É—Å–ª–æ–≤–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á (–≤—Ä–µ–º—è, —Ä–µ—Å—É—Ä—Å—ã –∏ —Ç. –¥.).
- **–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ (`success_criteria`)** ‚Äì –ø—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ —É—Å–ª–æ–≤–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏.
- **–°—Ç–∞—Ç—É—Å—ã (`statuses`)** ‚Äì —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–¥–∞—á–∏.
- **–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π (`task_history`)** ‚Äì –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∑–∞–¥–∞—á–∞—Ö.
- **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (`comments`)** ‚Äì –ø—Ä–∏–º–µ—á–∞–Ω–∏—è –∫ –∑–∞–¥–∞—á–∞–º.

---

## **1. –¢–∞–±–ª–∏—Ü–∞ `users` (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)**
–•—Ä–∞–Ω–∏—Ç —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

```sql
CREATE TABLE users (
    id            UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    username      VARCHAR(50) UNIQUE NOT NULL,
    email         VARCHAR(100) UNIQUE NOT NULL,
    password_hash TEXT NOT NULL,
    created_at    TIMESTAMP DEFAULT NOW(),
    updated_at    TIMESTAMP DEFAULT NOW()
);
```

## **2. –¢–∞–±–ª–∏—Ü–∞ `tasks` (–ó–∞–¥–∞—á–∏)**
–û—Å–Ω–æ–≤–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.

```sql
CREATE TABLE tasks (
    id          UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id     UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    title       VARCHAR(255) NOT NULL,
    description TEXT,
    context_id  UUID REFERENCES contexts(id) ON DELETE SET NULL,
    status_id   UUID NOT NULL REFERENCES statuses(id) ON DELETE CASCADE,
    due_date    TIMESTAMP,
    created_at  TIMESTAMP DEFAULT NOW(),
    updated_at  TIMESTAMP DEFAULT NOW()
);
```

## **3. –¢–∞–±–ª–∏—Ü–∞ `contexts` (–ö–æ–Ω—Ç–µ–∫—Å—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á)**
–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –≤ –∫–∞–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–¥–∞—á—É.

```sql
CREATE TABLE contexts (
    id          UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id     UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    name        VARCHAR(100) NOT NULL,
    description TEXT,
    created_at  TIMESTAMP DEFAULT NOW()
);
```

## **4. –¢–∞–±–ª–∏—Ü–∞ `statuses` (–°—Ç–∞—Ç—É—Å—ã –∑–∞–¥–∞—á)**
–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–¥–∞—á–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–Ω–æ–≤–∞—è", "–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ", "–∑–∞–≤–µ—Ä—à–µ–Ω–∞").

```sql
CREATE TABLE statuses (
    id   UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(50) UNIQUE NOT NULL
);
-- –ü—Ä–∏–º–µ—Ä –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã
INSERT INTO statuses (id, name) VALUES
    (gen_random_uuid(), 'New'),
    (gen_random_uuid(), 'In Progress'),
    (gen_random_uuid(), 'Completed'),
    (gen_random_uuid(), 'Archived');
```

## **5. –¢–∞–±–ª–∏—Ü–∞ `scenarios` (–°—Ü–µ–Ω–∞—Ä–∏–∏ Given-When-Then)**
–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏.

```sql
CREATE TABLE scenarios (
    id        UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    task_id   UUID NOT NULL REFERENCES tasks(id) ON DELETE CASCADE,
    given     TEXT NOT NULL,
    when      TEXT NOT NULL,
    then      TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

## **6. –¢–∞–±–ª–∏—Ü–∞ `success_criteria` (–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏)**
–§–∏–∫—Å–∏—Ä—É–µ—Ç, –∫–æ–≥–¥–∞ –∑–∞–¥–∞—á–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π.

```sql
CREATE TABLE success_criteria (
    id        UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    task_id   UUID NOT NULL REFERENCES tasks(id) ON DELETE CASCADE,
    criteria  TEXT NOT NULL,
    is_met    BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

## **7. –¢–∞–±–ª–∏—Ü–∞ `task_history` (–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞–¥–∞—á)**
–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∑–∞–¥–∞—á–∏.

```sql
CREATE TABLE task_history (
    id          UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    task_id     UUID NOT NULL REFERENCES tasks(id) ON DELETE CASCADE,
    user_id     UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    action      TEXT NOT NULL,
    changed_at  TIMESTAMP DEFAULT NOW()
);
```

## **8. –¢–∞–±–ª–∏—Ü–∞ `comments ` (–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∑–∞–¥–∞—á–∞–º)**
–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∑–∞–¥–∞—á–∞–º.

```sql
CREATE TABLE comments (
    id         UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    task_id    UUID NOT NULL REFERENCES tasks(id) ON DELETE CASCADE,
    user_id    UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    content    TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT NOW()
);
```

## üîó **–°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏ (ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ)**
[users] 1‚Äî‚àû [tasks]
[users] 1‚Äî‚àû [contexts]
[users] 1‚Äî‚àû [task_history]
[users] 1‚Äî‚àû [comments]

[tasks] 1‚Äî‚àû [scenarios]
[tasks] 1‚Äî‚àû [success_criteria]
[tasks] 1‚Äî‚àû [comments]
[tasks] 1‚Äî‚àû [task_history]
[tasks] ‚àû‚Äî1 [contexts]
[tasks] ‚àû‚Äî1 [statuses]



















